% Function file with all the callback functions used in the GUI for the Power Supply% (c) 2020 Lino van Mulken1; % not a function file, but a file with a set of functions % Start voltage sweep function start_sweep_callback()  % Global Variables  global ps;  global tab2_sp2;  global tab2_sp2_ssp1_sssp1;  global tab2_sp2_ssp1_sssp2;     f = zeros(1,7);  % Dialog Question  answer = questdlg('Are you sure you want to start the sweep?', 'Warning', 'Yes', 'No');    % Handle response  switch answer      case 'Yes'              try           ps.sweepVstart = str2num(get(tab2_sp2_ssp1_sssp1.voltage_sweep_min,'string'));          ps.sweepV = str2num(get(tab2_sp2_ssp1_sssp1.voltage_sweep_max,'string'));          ps.sweepSteps = str2num(get(tab2_sp2_ssp1_sssp1.voltage_sweep_steps,'string'));        catch          f(1) = warndlg('Please, fill in all sweep settings before continuing.','Error');        end                 try           warning_voltage(ps.sweepVstart);          warning_voltage(ps.sweepV);        catch          f(2) = warndlg('Voltage cannot be great than 5 V! Try again.','Error');                  end                      try           warning_voltage_low(ps.sweepVstart);          warning_voltage_low(ps.sweepV);        catch          f(3) = warndlg('Voltage cannot be less than 0 V! Try again.','Error');        end                  try           warning_steps(ps.sweepSteps);        catch          f(4) = warndlg('Amount of steps cannot be greater than 10 or smaller than 1! Try again.','Error');        end          try           warning_sweep(ps.sweepVstart,ps.sweepV);        catch          f(5) = warndlg('Minimum voltage must be less than maximum voltage!','Error');        end                      case 'No'      msgbox('Sweep not started.');    case 'Cancel'      msgbox('Sweep not started.');             end    if ~any(f)   % Start Measurement   DC_measurement(ps);   % Reset plot output checkboxes -> ensure that a new output is chosen   set(tab2_sp2_ssp1_sssp2.cb(1),'value',0);   set(tab2_sp2_ssp1_sssp2.cb(2),'Value',0);  else    msgbox('Sweep not started.');  end  end% Reset sweep edit boxfunction set_sweep(obj)    % Open waitbar  h = waitbar (0, 'Uploading...','position', [845 500 400 100]);  for i = 1:25  waitbar (i*1/25, h, 'Uploading...');      pause(0.1);  end    waitbar (1, h, 'Done!');   pause(0.5);  close (h);        endfunction% Checkbutton Voltagefunction v_plot_callback()  global ps;  global data;  global tab2_sp2_ssp1_sssp2;  if (get(tab2_sp2_ssp1_sssp2.cb(1),'value'))    data.plot_label = 1;    plot_select_callback();           data.y = ps.vout;    data.x = ps.vin;        data.plot_label = 1;    plot_select_callback();      endend% Checkbutton Currentfunction i_plot_callback()  global ps;  global data;  global tab2_sp2_ssp1_sssp2;  if (get(tab2_sp2_ssp1_sssp2.cb(2),'value'))    data.plot_label = 2;       plot_select_callback();    data.x = ps.vin;        data.y = ps.i;     end   end